{
  "version": 3,
  "sources": ["../src/shared/util.ts", "../src/observer/observer.ts", "../src/mixin/state.ts", "../src/mixin/init.ts", "../src/mixin/render.ts", "../src/mixin/event.ts", "../src/mixin/lifecycle.ts", "../src/vue.ts"],
  "sourcesContent": ["/*\n  a-zA-Z: \u5339\u914D\u6240\u6709\u5C0F\u5199\u548C\u5927\u5199\u5B57\u6BCD\u3002\n  \\u00B7: \u5339\u914DUnicode\u7F16\u7801\u4E3A\\u00B7\u7684\u4E2D\u95F4\u70B9\uFF08\u00B7\uFF09\u3002\n  \\u00C0-\\u00D6: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u00C0\u5230\\u00D6\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u00D8-\\u00F6: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u00D8\u5230\\u00F6\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u00F8-\\u037D: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u00F8\u5230\\u037D\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u037F-\\u1FFF: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u037F\u5230\\u1FFF\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u200C-\\u200D: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u200C\u5230\\u200D\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u203F-\\u2040: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u203F\u5230\\u2040\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u2070-\\u218F: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u2070\u5230\\u218F\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u2C00-\\u2FEF: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u2C00\u5230\\u2FEF\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\u3001-\\uD7FF: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\u3001\u5230\\uD7FF\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\uF900-\\uFDCF: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\uF900\u5230\\uFDCF\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n  \\uFDF0-\\uFFFD: \u5339\u914DUnicode\u7F16\u7801\u8303\u56F4\u5728\\uFDF0\u5230\\uFFFD\u4E4B\u95F4\u7684\u5B57\u7B26\u3002\n*/\nexport const unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\nconst _toString = Object.prototype.toString;\n\nexport const isPlainObject = (val: unknown): val is Record<string, unknown>  => _toString.call(val) === '[object Object]';\nexport const isObject = (val: unknown): val is  Record<any, any> => val !== null && typeof val === 'object';\nexport const isFunction = (val: unknown): val is () => Record<any, any> => typeof val === 'function';\n\n/**\n * @description \u89E3\u6790\u5B57\u7B26\u4E32\u8DEF\u5F84\n * \n */\nconst bailRE = new RegExp(`[^${unicodeRegExp.source}.$_\\\\d]`);\ntype ObjectWithNestedProperties = Record<string, any>\n// parsePath<T extends object>(path: string)\nexport const parsePath = <T extends ObjectWithNestedProperties>(path: string) => {\n  if(!bailRE.test(path)) {\n    const segments = path.split('.');\n    return (obj: T): T => {\n      segments.forEach(item => {\n        if(obj) {\n          obj = obj[item];\n        }\n      });\n      return obj;\n    };\n  }\n}; \n\n/**\n * @description \u5220\u9664\u6570\u7EC4\u4E2D\u6307\u5B9A\u7684\u5730\u5740\n */\nexport const remove = (arr: any[], item: any) => {\n  if(arr.length) {\n    const index = arr.indexOf(item);\n    if(index > -1) {\n      return arr.splice(index, 1);\n    }\n  }\n};\n\n/**\n * @description \u5224\u65AD\u8BE5\u5BF9\u8C61\u662F\u5426\u6709\u8FD9\u4E2A\u5C5E\u6027\n */\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nexport const hasOwn = (obj: Record<string, any>, key: string) => {\n  return hasOwnProperty.call(obj, key);\n};\n\n/**\n * @description \u9017\u53F7\u5206\u9694\uFF0C\u6620\u5C04\n */\nexport const makeMap = (str: string, expectsLowerCase?: boolean): (key: string) => true | void  => {\n  const map = Object.create(null);\n  str.split(',').forEach(key => { map[key] = true; });\n  return expectsLowerCase ? val => map[val.toLowerCase()] : val =>  map[val];\n};\n\n\n", "import { isObject } from '@/shared/util';\nimport { Component } from '@/type/component';\n\n\nexport class Observer {\n  value: any;\n  constructor(value: any) {\n    this.value = value;\n    if(Array.isArray(value)) {\n\n    } else {\n      this.walk(value);\n    }\n  }\n  walk(obj: Record<string, any>) {\n    Object.keys(obj).forEach(key => {\n      defineReactive(obj, key);\n    });\n  }\n}\n\nconst defineReactive = (obj: Record<string, any>, key: string) => {\n  observe(obj[key]);\n  const value = obj[key];\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get() {\n      return value; \n    },\n    set(val) {\n      if(value !== val) {\n        return;\n      } else {\n        obj[key] = val;\n        observe(obj[key]);\n      }\n    } \n  });\n};\n\nexport const proxy = (target: Component, sourceKey: string, key: string) => {\n  Object.defineProperty(target, key, {\n    get() {\n      return this[sourceKey][key];\n    },\n    set(val) {\n      this[sourceKey][key] = val;\n    }\n  });\n};\n\nexport const observe = (value: any) => {\n  if(!isObject(value)) {\n    return; \n  }\n  new Observer(value);\n};", "import { observe, proxy } from '@/observer/observer';\nimport { isFunction, isPlainObject } from '@/shared/util';\nimport {Component, PropsType, WatchFn, WatchObject, WatchOptions} from '@/type/component';\n\n\nexport function initProxy(vm: Component) {\n  console.log(vm);\n}\n\nexport function initInject(vm: Component) {\n  console.log(vm);\n}\n/**\n * \n * @param vm \n */\nexport function initState(vm: Component) {\n  const keys = Object.keys(vm.$data);\n  // \u4EE3\u7406\u5230vue\u5B9E\u4F8B\u4E0A\n  keys.forEach(key => {\n    proxy(vm, '_data', key);\n  });\n  // observe(data);\n\n\n  // \u521D\u59CB\u5316\u65B9\u6CD5\n\n  console.log(vm, '111');\n  // vm._watcher = [];\n  // const opts = vm.$options;\n  // if(opts.props) initProps(vm, opts.props);\n  // if(opts.methods) initMethods(vm, opts.methods);\n  // if(opts.data) {\n  //   initData(vm);\n  // } else {\n  //   observe(vm._data = {}, true);\n  // }\n  // console.log(vm);\n}\n\n// function validateProp(key: string, propOptions: PropsType, vm: Component) {\n//   const prop = propOptions[key];\n//   const absent = !hasOwn()\n// }\nexport function initProps(vm: Component, propsOptions: PropsType) {\n  // const props = vm._props = {};\n  // const keys: string[] = vm.$options._propKeys = [];\n  // // const isRoot = !vm.$parent;\n  // // // \u5207\u6362\u54CD\u5E94\u5F0F\uFF0C\u628A\u54CD\u5E94\u5F0F\u5173\u6389\n  // for(const key in propsOptions) {\n  //   // keys.push(key);\n  //   defineReactive(props, key, true);\n  //   if(!(key in vm)) {\n  //     proxy(vm, '_props', key);\n  //   }\n  // }\n  // // // \u5207\u6362\u54CD\u5E94\u5F0F\uFF0C\u628A\u54CD\u5E94\u5F0F\u5F00\u542F\n  \n}\n\nexport function initProvide(vm: Component) {\n  console.log(vm);\n}\n\n/**\n * \u6574\u7406watch\u53C2\u6570\uFF0C\n * @param vm\n * @param expOrFn cb\u4E3A\u5BF9\u8C61\uFF0C\u63D0\u53D6handler \u4E0E options, \u5982\u679Ccb\u4E3A\u5B57\u7B26\u4E32\uFF0C\u62FF\u53BBvm\u8EAB\u4E0A\u4EE3\u7406\u7684\u51FD\u6570\u540D\n * @param cb\n * @param options\n */\nfunction createWatcher(vm: Component, expOrFn: string | (() => any), cb: WatchObject | WatchFn | string, options?: WatchOptions) {\n  let option = options;\n  let handler: WatchFn = () => {};\n  if(isPlainObject(cb)) {\n    option = cb;\n    handler = cb.handler;\n  }\n  if (typeof cb === 'string') {\n    handler = vm[cb];\n  }\n  return vm.$watch(expOrFn, handler, option);\n}\n\n// inject proxy \u90FD\u653E\u5230\u8FD9\u4E2A\u91CC\u9762\nexport function stateMixin(Vue: typeof Component) {\n  Object.defineProperty(Vue.prototype, '$data', {\n    get() {\n      return this._data;\n    }\n  });\n  Object.defineProperty(Vue.prototype, '$props', {\n    get() {\n      return this._props;\n    }\n  });\n  // Vue.prototype.$set = set\n  // Vue.prototype.$delete = del\n  // https://v2.cn.vuejs.org/v2/api/#vm-watch\n  // Vue.prototype.$watch = function(expOrFn, cb, options) {\n  //   const vm: Component = this;\n  //   if(isPlainObject(cb)) {\n  //     // \u6574\u7406\u53C2\u6570\u4F7F\u7528, \u8FD9\u91CC\u9762\u6CA1\u6709options\uFF0C options\u5728cb\u5BF9\u8C61\u91CC\u9762\n  //     return createWatcher(vm, expOrFn, cb, options);\n  //   }\n  //   const option = Object.assign({ user: true }, options);\n  //   const watcher = new Watcher(vm, expOrFn, cb, options);\n  //   if (option.immediate) {\n  //     const info = `callback for immediate watcher \"${watcher.expression}\"`;\n  //     pushTarget();\n  //     invokeWithErrorHandling(cb, vm, [watcher.value], vm, info);\n  //     popTarget();\n  //   }\n  //   return function unwatchFn () {\n  //     watcher.teardown();\n  //   };\n  // };\n}", "import {Component, Options} from '@/type/component';\nimport { initState } from './state';\n\n\n\n// let _uid = 0;\nexport function initMixin(Vue: typeof Component) {\n  Vue.prototype._init = function(options: Options) {\n    this.$options = options;\n    this.$data = typeof options.data === 'function' ? options.data.call(this) : options.data;\n    initState(this);\n  };\n}\n\n\n\n", "import { Component } from '@/type/component';\r\n\r\nexport function initRender(vm: Component) {\r\n  // vm.vnode = null;\r\n  // vm._staticTrees = null;\r\n  // const options = vm.$options;\r\n  // const parentVnode = vm.$vnode = options._parentVnode;\r\n  // const renderContext = parentVnode && parentVnode.renderContext;\r\n  // vm.$scopedSlots = {};\r\n  // vm._c = (a, b, c, d) => createElement(vm, a, b, c , d, false);\r\n  // vm.$createElement = (a, b, c, d) => createElement(vm, a, b, c, d, true);\r\n\r\n  // const parentData = parentVnode && parentVnode.parentData;\r\n  // defineReactive(vm, '$attrs', parentData && parentData.attrs || {}, null, true)\r\n  // defineReactive(vm, '$listeners', parentData && parentData.attrs || {}, null, true)\r\n}\r\n\r\nexport function renderMixin(Vue: typeof Component) {\r\n  console.log(Vue);\r\n}", "import { Component } from '@/type/component';\r\n\r\n\r\nexport function initEvents(vm: Component) {\r\n  // vm._event = Object.create(null);\r\n  // vm._hasHookEvent = false;\r\n  // const listeners = vm.$options._parentListeners;\r\n  // if(listeners) {\r\n  //   // updateComponentListeners(vm, listeners)\r\n  // }\r\n  // console.log(vm);\r\n}\r\n\r\nexport function eventsMixin (Vue: typeof Component) {\r\n  console.log(Vue);\r\n}\r\n\r\n", "import { Component, Hook } from '@/type/component';\r\n\r\n\r\nexport function initLifecycle(vm: Component) {\r\n  // const options = vm.$options;\r\n  // const parent = options.parent;\r\n  // vm.$parent = parent;\r\n  // vm.$root = parent ? parent.$root : vm;\r\n  // vm.$children = [];\r\n  // vm.$refs = {};\r\n\r\n  // vm._watcher = null;\r\n  // vm._inactive = null;\r\n  // vm._directInactive = null;\r\n  // vm._isMounted = false;\r\n  // vm._isDestroyed = false;\r\n  // vm._isBeingDestroyed = false;\r\n}\r\nexport function callHook(vm: Component, hook: Hook) {\r\n  console.log(vm, hook);\r\n}\r\n\r\nexport function lifecycleMixin(Vue: typeof Component) {\r\n  console.log(Vue);\r\n}\r\n\r\n", "import { isObject, isPlainObject } from './shared/util';\nimport { initMixin } from './mixin/init';\nimport { stateMixin } from './mixin/state';\nimport { renderMixin } from './mixin/render';\nimport { eventsMixin } from './mixin/event';\nimport { lifecycleMixin } from './mixin/lifecycle';\nimport {Options, VmWatch} from './type/component';\nimport Watcher from '@/observer/watcher';\n\n// \u8FFD\u8E2A\u5230Vue.js\u7684\u6574\u4E2A\u52A0\u8F7D\u548C\u521D\u59CB\u5316\u8FC7\u7A0B\nclass Vue {\n  $options: Options;\n  $data: Record<any, any> = {};\n  _init!: (options: Options) => void;\n  _watchers: Watcher[];\n  $watch!: () => () => void;// VmWatch;\n\n  constructor(options: Options) {\n    if(options && isPlainObject(options)){\n      this.$options = options;\n      this._watchers = [];\n      // Vue\u6E90\u7801\u5904\u7406\uFF1A\"noImplicitThis\": false \u6765\u7981\u7528\u9690\u5F0F any \u7C7B\u578B\u7684\u8B66\u544A\u3002\n      this._init(options);\n    } else {\n      throw new Error('Options \u4F20\u9012\u5BF9\u8C61');\n    }\n  }\n}\n\n// //  \u521D\u59CB\u5316\uFF1A\u539F\u578B\u6DFB\u52A0 _init\u65B9\u6CD5\n// // _init \u521D\u59CB\u5316\u503C\uFF0C\u4E8B\u4EF6\uFF0Crender,inject,state,provide, \u6302\u8F7D\ninitMixin(Vue);\n// \u6570\u636E\u5904\u7406\uFF1A\u539F\u578B\u6DFB\u52A0$data\u3001$props\u3001$watch\u3001$set\u3001$delete\nstateMixin(Vue);\n// \u4E8B\u4EF6\u5904\u7406\uFF1A\u539F\u578B\u6DFB\u52A0$on\u3001$once\u3001$off\u3001$emit\neventsMixin(Vue);\n// \u751F\u547D\u5468\u671F\u5904\u7406\uFF1A\u539F\u578B\u6DFB\u52A0_update\u3001$forceUpdate\u3001$destroy\nlifecycleMixin(Vue);\n// render\u5904\u7406: \u539F\u578B\u6DFB\u52A0 $nextTick\u3001_render\nrenderMixin(Vue);\n\nexport default Vue;\n\n\n"],
  "mappings": ";;;AAeO,MAAM,gBAAgB;AAE7B,MAAM,YAAY,OAAO,UAAU;AAE5B,MAAM,gBAAgB,CAAC,QAAkD,UAAU,KAAK,GAAG,MAAM;AAQxG,MAAM,SAAS,IAAI,OAAO,KAAK,cAAc,MAAM,SAAS;;;ACcrD,MAAM,QAAQ,CAAC,QAAmB,WAAmB,QAAgB;AAC1E,WAAO,eAAe,QAAQ,KAAK;AAAA,MACjC,MAAM;AACJ,eAAO,KAAK,SAAS,EAAE,GAAG;AAAA,MAC5B;AAAA,MACA,IAAI,KAAK;AACP,aAAK,SAAS,EAAE,GAAG,IAAI;AAAA,MACzB;AAAA,IACF,CAAC;AAAA,EACH;;;AClCO,WAAS,UAAU,IAAe;AACvC,UAAM,OAAO,OAAO,KAAK,GAAG,KAAK;AAEjC,SAAK,QAAQ,SAAO;AAClB,YAAM,IAAI,SAAS,GAAG;AAAA,IACxB,CAAC;AAMD,YAAQ,IAAI,IAAI,KAAK;AAAA,EAWvB;AA+CO,WAAS,WAAWA,MAAuB;AAChD,WAAO,eAAeA,KAAI,WAAW,SAAS;AAAA,MAC5C,MAAM;AACJ,eAAO,KAAK;AAAA,MACd;AAAA,IACF,CAAC;AACD,WAAO,eAAeA,KAAI,WAAW,UAAU;AAAA,MAC7C,MAAM;AACJ,eAAO,KAAK;AAAA,MACd;AAAA,IACF,CAAC;AAAA,EAsBH;;;AC/GO,WAAS,UAAUC,MAAuB;AAC/C,IAAAA,KAAI,UAAU,QAAQ,SAAS,SAAkB;AAC/C,WAAK,WAAW;AAChB,WAAK,QAAQ,OAAO,QAAQ,SAAS,aAAa,QAAQ,KAAK,KAAK,IAAI,IAAI,QAAQ;AACpF,gBAAU,IAAI;AAAA,IAChB;AAAA,EACF;;;ACKO,WAAS,YAAYC,MAAuB;AACjD,YAAQ,IAAIA,IAAG;AAAA,EACjB;;;ACNO,WAAS,YAAaC,MAAuB;AAClD,YAAQ,IAAIA,IAAG;AAAA,EACjB;;;ACOO,WAAS,eAAeC,MAAuB;AACpD,YAAQ,IAAIA,IAAG;AAAA,EACjB;;;ACdA,MAAM,MAAN,MAAU;AAAA;AAAA,IAOR,YAAY,SAAkB;AAL9B,mBAA0B,CAAC;AAMzB,UAAG,WAAW,cAAc,OAAO,GAAE;AACnC,aAAK,WAAW;AAChB,aAAK,YAAY,CAAC;AAElB,aAAK,MAAM,OAAO;AAAA,MACpB,OAAO;AACL,cAAM,IAAI,MAAM,kCAAc;AAAA,MAChC;AAAA,IACF;AAAA,EACF;AAIA,YAAU,GAAG;AAEb,aAAW,GAAG;AAEd,cAAY,GAAG;AAEf,iBAAe,GAAG;AAElB,cAAY,GAAG;AAEf,MAAO,cAAQ;",
  "names": ["Vue", "Vue", "Vue", "Vue", "Vue"]
}
